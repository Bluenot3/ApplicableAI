<html><head><base href="https://theglitch.com/">
<title>Advanced Financial Data Visualization Playground</title>
<style>
    body {
        font-family: 'Roboto', Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f0f4f8;
        color: #333;
    }
    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }
    h1, h2, h3 {
        color: #2c3e50;
        text-align: center;
    }
    .playground {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        padding: 20px;
        margin-top: 20px;
    }
    .code-editor {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
    }
    .editor {
        flex: 1;
    }
    textarea {
        width: 100%;
        height: 300px;
        resize: vertical;
        font-family: 'Fira Code', monospace;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 14px;
    }
    button, select {
        display: block;
        width: 100%;
        padding: 12px;
        background-color: #3498db;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin-bottom: 15px;
        transition: background-color 0.3s ease;
    }
    button:hover, select:hover {
        background-color: #2980b9;
    }
    .output {
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 20px;
        min-height: 400px;
        background-color: #fff;
    }
    #environment-selector {
        background-color: #2ecc71;
    }
    #environment-selector:hover {
        background-color: #27ae60;
    }
    #chart-type-selector {
        background-color: #e74c3c;
    }
    #chart-type-selector:hover {
        background-color: #c0392b;
    }
    .control-panel {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
    }
    .control-panel > * {
        flex: 1;
    }
    #output-frame {
        width: 100%;
        height: 600px;
        border: none;
    }
</style>
</head>
<body>
    <div class="container">
        <h1>Advanced Financial Data Visualization Playground</h1>
        <div class="playground">
            <div class="control-panel">
                <select id="environment-selector">
                    <option value="default">Default Financial Dashboard</option>
                    <option value="stockmarket">Stock Market Analysis</option>
                    <option value="cryptocurrency">Cryptocurrency Tracker</option>
                    <option value="personalfinance">Personal Finance Manager</option>
                </select>
                <select id="chart-type-selector">
                    <option value="line">Line Chart</option>
                    <option value="bar">Bar Chart</option>
                    <option value="candlestick">Candlestick Chart</option>
                    <option value="pie">Pie Chart</option>
                    <option value="scatter">Scatter Plot</option>
                </select>
            </div>
            <div class="code-editor">
                <div class="editor">
                    <h3>HTML</h3>
                    <textarea id="html-editor"><div id="chart-container"></div>
<div id="data-table"></div></textarea>
                </div>
                <div class="editor">
                    <h3>CSS</h3>
                    <textarea id="css-editor">#chart-container {
    width: 100%;
    height: 400px;
    margin-bottom: 20px;
}
#data-table {
    width: 100%;
    overflow-x: auto;
}
table {
    width: 100%;
    border-collapse: collapse;
}
th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}
th {
    background-color: #f2f2f2;
}</textarea>
                </div>
                <div class="editor">
                    <h3>JavaScript</h3>
                    <textarea id="js-editor">// Load the Visualization API and the corechart package.
google.charts.load('current', {'packages':['corechart', 'table']});

// Set a callback to run when the Google Visualization API is loaded.
google.charts.setOnLoadCallback(drawCharts);

function drawCharts() {
    const data = new google.visualization.DataTable();
    data.addColumn('string', 'Month');
    data.addColumn('number', 'Revenue');
    data.addColumn('number', 'Expenses');
    data.addColumn('number', 'Profit');
    data.addRows([
        ['Jan', 1000, 800, 200],
        ['Feb', 1170, 860, 310],
        ['Mar', 660, 1120, -460],
        ['Apr', 1030, 540, 490],
        ['May', 1000, 700, 300],
        ['Jun', 1170, 1000, 170],
        ['Jul', 660, 830, -170],
        ['Aug', 1030, 620, 410]
    ]);

    const options = {
        title: 'Monthly Financial Performance',
        curveType: 'function',
        legend: { position: 'bottom' },
        hAxis: { title: 'Month' },
        vAxis: { title: 'Amount ($)' },
        series: {
            0: { color: '#4285F4' },
            1: { color: '#DB4437' },
            2: { color: '#0F9D58' }
        }
    };

    const chart = new google.visualization.LineChart(document.getElementById('chart-container'));
    chart.draw(data, options);

    const table = new google.visualization.Table(document.getElementById('data-table'));
    table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});
}

// Add event listener for chart type changes
document.getElementById('chart-type-selector').addEventListener('change', function() {
    const chartType = this.value;
    updateChartType(chartType);
});

function updateChartType(chartType) {
    google.charts.setOnLoadCallback(() => {
        const data = new google.visualization.DataTable();
        data.addColumn('string', 'Month');
        data.addColumn('number', 'Revenue');
        data.addColumn('number', 'Expenses');
        data.addColumn('number', 'Profit');
        data.addRows([
            ['Jan', 1000, 800, 200],
            ['Feb', 1170, 860, 310],
            ['Mar', 660, 1120, -460],
            ['Apr', 1030, 540, 490],
            ['May', 1000, 700, 300],
            ['Jun', 1170, 1000, 170],
            ['Jul', 660, 830, -170],
            ['Aug', 1030, 620, 410]
        ]);

        const options = {
            title: 'Monthly Financial Performance',
            legend: { position: 'bottom' },
            hAxis: { title: 'Month' },
            vAxis: { title: 'Amount ($)' },
            series: {
                0: { color: '#4285F4' },
                1: { color: '#DB4437' },
                2: { color: '#0F9D58' }
            }
        };

        let chart;
        switch(chartType) {
            case 'line':
                chart = new google.visualization.LineChart(document.getElementById('chart-container'));
                break;
            case 'bar':
                chart = new google.visualization.ColumnChart(document.getElementById('chart-container'));
                break;
            case 'candlestick':
                // For candlestick, we need different data structure
                data.removeColumn(3);
                data.removeColumn(2);
                data.addColumn('number', 'Low');
                data.addColumn('number', 'Open');
                data.addColumn('number', 'Close');
                data.addColumn('number', 'High');
                data.removeRows(0, data.getNumberOfRows());
                data.addRows([
                    ['Jan', 800, 950, 1000, 1050],
                    ['Feb', 860, 1000, 1170, 1200],
                    ['Mar', 660, 700, 680, 720],
                    ['Apr', 1030, 1050, 1030, 1100],
                    ['May', 1000, 1020, 1000, 1050],
                    ['Jun', 1170, 1180, 1170, 1220],
                    ['Jul', 660, 700, 660, 710],
                    ['Aug', 1030, 1040, 1030, 1060]
                ]);
                chart = new google.visualization.CandlestickChart(document.getElementById('chart-container'));
                break;
            case 'pie':
                // For pie chart, we'll just use the total revenue
                data.removeColumn(3);
                data.removeColumn(2);
                chart = new google.visualization.PieChart(document.getElementById('chart-container'));
                break;
            case 'scatter':
                chart = new google.visualization.ScatterChart(document.getElementById('chart-container'));
                break;
        }
        chart.draw(data, options);
    });
}</textarea>
                </div>
            </div>
            <button id="run-button">Run Code</button>
            <h2>Output:</h2>
            <div class="output">
                <iframe id="output-frame"></iframe>
            </div>
        </div>
    </div>

    <script>
        const environments = {
            default: {
                html: `<div id="chart-container"></div>
<div id="data-table"></div>`,
                css: `#chart-container {
    width: 100%;
    height: 400px;
    margin-bottom: 20px;
}
#data-table {
    width: 100%;
    overflow-x: auto;
}
table {
    width: 100%;
    border-collapse: collapse;
}
th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}
th {
    background-color: #f2f2f2;
}`,
                js: `// Load the Visualization API and the corechart package.
google.charts.load('current', {'packages':['corechart', 'table']});

// Set a callback to run when the Google Visualization API is loaded.
google.charts.setOnLoadCallback(drawCharts);

function drawCharts() {
    const data = new google.visualization.DataTable();
    data.addColumn('string', 'Month');
    data.addColumn('number', 'Revenue');
    data.addColumn('number', 'Expenses');
    data.addColumn('number', 'Profit');
    data.addRows([
        ['Jan', 1000, 800, 200],
        ['Feb', 1170, 860, 310],
        ['Mar', 660, 1120, -460],
        ['Apr', 1030, 540, 490],
        ['May', 1000, 700, 300],
        ['Jun', 1170, 1000, 170],
        ['Jul', 660, 830, -170],
        ['Aug', 1030, 620, 410]
    ]);

    const options = {
        title: 'Monthly Financial Performance',
        curveType: 'function',
        legend: { position: 'bottom' },
        hAxis: { title: 'Month' },
        vAxis: { title: 'Amount ($)' },
        series: {
            0: { color: '#4285F4' },
            1: { color: '#DB4437' },
            2: { color: '#0F9D58' }
        }
    };

    const chart = new google.visualization.LineChart(document.getElementById('chart-container'));
    chart.draw(data, options);

    const table = new google.visualization.Table(document.getElementById('data-table'));
    table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});
}

// Add event listener for chart type changes
document.getElementById('chart-type-selector').addEventListener('change', function() {
    const chartType = this.value;
    updateChartType(chartType);
});

function updateChartType(chartType) {
    google.charts.setOnLoadCallback(() => {
        const data = new google.visualization.DataTable();
        data.addColumn('string', 'Month');
        data.addColumn('number', 'Revenue');
        data.addColumn('number', 'Expenses');
        data.addColumn('number', 'Profit');
        data.addRows([
            ['Jan', 1000, 800, 200],
            ['Feb', 1170, 860, 310],
            ['Mar', 660, 1120, -460],
            ['Apr', 1030, 540, 490],
            ['May', 1000, 700, 300],
            ['Jun', 1170, 1000, 170],
            ['Jul', 660, 830, -170],
            ['Aug', 1030, 620, 410]
        ]);

        const options = {
            title: 'Monthly Financial Performance',
            legend: { position: 'bottom' },
            hAxis: { title: 'Month' },
            vAxis: { title: 'Amount ($)' },
            series: {
                0: { color: '#4285F4' },
                1: { color: '#DB4437' },
                2: { color: '#0F9D58' }
            }
        };

        let chart;
        switch(chartType) {
            case 'line':
                chart = new google.visualization.LineChart(document.getElementById('chart-container'));
                break;
            case 'bar':
                chart = new google.visualization.ColumnChart(document.getElementById('chart-container'));
                break;
            case 'candlestick':
                // For candlestick, we need different data structure
                data.removeColumn(3);
                data.removeColumn(2);
                data.addColumn('number', 'Low');
                data.addColumn('number', 'Open');
                data.addColumn('number', 'Close');
                data.addColumn('number', 'High');
                data.removeRows(0, data.getNumberOfRows());
                data.addRows([
                    ['Jan', 800, 950, 1000, 1050],
                    ['Feb', 860, 1000, 1170, 1200],
                    ['Mar', 660, 700, 680, 720],
                    ['Apr', 1030, 1050, 1030, 1100],
                    ['May', 1000, 1020, 1000, 1050],
                    ['Jun', 1170, 1180, 1170, 1220],
                    ['Jul', 660, 700, 660, 710],
                    ['Aug', 1030, 1040, 1030, 1060]
                ]);
                chart = new google.visualization.CandlestickChart(document.getElementById('chart-container'));
                break;
            case 'pie':
                // For pie chart, we'll just use the total revenue
                data.removeColumn(3);
                data.removeColumn(2);
                chart = new google.visualization.PieChart(document.getElementById('chart-container'));
                break;
            case 'scatter':
                chart = new google.visualization.ScatterChart(document.getElementById('chart-container'));
                break;
        }
        chart.draw(data, options);
    });
}`
            },
            stockmarket: {
                html: `<div id="chart-container"></div>
<div id="stock-selector"></div>
<div id="data-table"></div>`,
                css: `#chart-container {
    width: 100%;
    height: 400px;
    margin-bottom: 20px;
}
#stock-selector {
    margin-bottom: 20px;
}
#data-table {
    width: 100%;
    overflow-x: auto;
}
table {
    width: 100%;
    border-collapse: collapse;
}
th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}
th {
    background-color: #f2f2f2;
}`,
                js: `google.charts.load('current', {'packages':['corechart', 'table']});
google.charts.setOnLoadCallback(initializeStockMarket);

function initializeStockMarket() {
    const stocks = ['AAPL', 'GOOGL', 'MSFT', 'AMZN'];
    const stockSelector = document.getElementById('stock-selector');
    
    stocks.forEach(stock => {
        const button = document.createElement('button');
        button.textContent = stock;
        button.onclick = () => updateStockData(stock);
        stockSelector.appendChild(button);
    });

    updateStockData('AAPL');
}

function updateStockData(symbol) {
    // In a real application, you would fetch this data from an API
    const stockData = {
        'AAPL': [
            ['Date', 'Open', 'High', 'Low', 'Close'],
            ['2023-05-01', 169.28, 170.45, 168.64, 169.59],
            ['2023-05-02', 170.09, 170.35, 167.54, 168.54],
            ['2023-05-03', 169.50, 170.92, 167.16, 167.45],
            ['2023-05-04', 164.89, 167.04, 164.31, 165.79],
            ['2023-05-05', 170.98, 174.30, 170.76, 173.57]
        ],
        'GOOGL': [
            ['Date', 'Open', 'High', 'Low', 'Close'],
            ['2023-05-01', 108.24, 108.95, 107.04, 107.20],
            ['2023-05-02', 107.67, 107.83, 105.62, 106.12],
            ['2023-05-03', 106.48, 107.98, 105.90, 106.12],
            ['2023-05-04', 104.75, 106.21, 103.44, 105.21],
            ['2023-05-05', 105.98, 106.85, 104.70, 106.53]
        ],
        'MSFT': [
            ['Date', 'Open', 'High', 'Low', 'Close'],
            ['2023-05-01', 307.02, 309.95, 306.40, 307.26],
            ['2023-05-02', 308.66, 309.92, 305.87, 307.00],
            ['2023-05-03', 307.71, 310.37, 304.75, 305.41],
            ['2023-05-04', 304.64, 306.93, 302.92, 305.50],
            ['2023-05-05', 306.42, 312.39, 306.25, 310.65]
        ],
        'AMZN': [
            ['Date', 'Open', 'High', 'Low', 'Close'],
            ['2023-05-01', 104.50, 104.95, 103.04, 103.65],
            ['2023-05-02', 103.98, 104.09, 101.88, 102.31],
            ['2023-05-03', 102.77, 103.75, 101.45, 101.50],
            ['2023-05-04', 101.59, 103.39, 101.27, 102.74],
            ['2023-05-05', 104.00, 105.86, 103.67, 105.66]
        ]
    };

    const data = google.visualization.arrayToDataTable(stockData[symbol]);

    const options = {
        title: symbol + ' Stock Performance',
        legend: 'none',
        candlestick: {
            fallingColor: { strokeWidth: 0, fill: '#a52714' },
            risingColor: { strokeWidth: 0, fill: '#0f9d58' }
        }
    };

    const chart = new google.visualization.CandlestickChart(document.getElementById('chart-container'));
    chart.draw(data, options);

    const table = new google.visualization.Table(document.getElementById('data-table'));
    table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});
}`
            },
            cryptocurrency: {
                html: `<div id="chart-container"></div>
<div id="crypto-selector"></div>
<div id="data-table"></div>`,
                css: `#chart-container {
    width: 100%;
    height: 400px;
    margin-bottom: 20px;
}
#crypto-selector {
    margin-bottom: 20px;
}
#data-table {
    width: 100%;
    overflow-x: auto;
}
table {
    width: 100%;
    border-collapse: collapse;
}
th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}
th {
    background-color: #f2f2f2;
}`,
                js: `google.charts.load('current', {'packages':['corechart', 'table']});
google.charts.setOnLoadCallback(initializeCryptoTracker);

function initializeCryptoTracker() {
    const cryptos = ['BTC', 'ETH', 'XRP', 'LTC'];
    const cryptoSelector = document.getElementById('crypto-selector');
    
    cryptos.forEach(crypto => {
        const button = document.createElement('button');
        button.textContent = crypto;
        button.onclick = () => updateCryptoData(crypto);
        cryptoSelector.appendChild(button);
    });

    updateCryptoData('BTC');
}

function updateCryptoData(symbol) {
    // In a real application, you would fetch this data from an API
    const cryptoData = {
        'BTC': [
            ['Date', 'Price', 'Volume'],
            ['2023-05-01', 28130, 23456789],
            ['2023-05-02', 28720, 19876543],
            ['2023-05-03', 29105, 21345678],
            ['2023-05-04', 29251, 18765432],
            ['2023-05-05', 29533, 22345678]
        ],
        'ETH': [
            ['Date', 'Price', 'Volume'],
            ['2023-05-01', 1847, 12345678],
            ['2023-05-02', 1883, 11234567],
            ['2023-05-03', 1905, 13456789],
            ['2023-05-04', 1918, 10987654],
            ['2023-05-05', 1942, 14567890]
        ],
        'XRP': [
            ['Date', 'Price', 'Volume'],
            ['2023-05-01', 0.46, 2345678],
            ['2023-05-02', 0.47, 2456789],
            ['2023-05-03', 0.48, 2567890],
            ['2023-05-04', 0.47, 2345678],
            ['2023-05-05', 0.48, 2678901]
        ],
        'LTC': [
            ['Date', 'Price', 'Volume'],
            ['2023-05-01', 87.23, 1234567],
            ['2023-05-02', 89.45, 1345678],
            ['2023-05-03', 90.78, 1456789],
            ['2023-05-04', 91.56, 1345678],
            ['2023-05-05', 92.34, 1567890]
        ]
    };

    const data = google.visualization.arrayToDataTable(cryptoData[symbol]);

    const options = {
        title: symbol + ' Price and Volume',
        legend: { position: 'bottom' },
        series: {
            0: { targetAxisIndex: 0 },
            1: { targetAxisIndex: 1 }
        },
        vAxes: {
            0: { title: 'Price' },
            1: { title: 'Volume' }
        }
    };

    const chart = new google.visualization.LineChart(document.getElementById('chart-container'));
    chart.draw(data, options);

    const table = new google.visualization.Table(document.getElementById('data-table'));
    table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});
}`
            },
            personalfinance: {
                html: `<div id="chart-container"></div>
<div id="category-selector"></div>
<div id="data-table"></div>`,
                css: `#chart-container {
    width: 100%;
    height: 400px;
    margin-bottom: 20px;
}
#category-selector {
    margin-bottom: 20px;
}
#data-table {
    width: 100%;
    overflow-x: auto;
}
table {
    width: 100%;
    border-collapse: collapse;
}
th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}
th {
    background-color: #f2f2f2;
}`,
                js: `google.charts.load('current', {'packages':['corechart', 'table']});
google.charts.setOnLoadCallback(initializePersonalFinance);

function initializePersonalFinance() {
    const categories = ['Income', 'Expenses', 'Savings', 'Investments'];
    const categorySelector = document.getElementById('category-selector');
    
    categories.forEach(category => {
        const button = document.createElement('button');
        button.textContent = category;
        button.onclick = () => updateFinanceData(category);
        categorySelector.appendChild(button);
    });

    updateFinanceData('Income');
}

function updateFinanceData(category) {
    // In a real application, you would fetch this data from a personal finance API or database
    const financeData = {
        'Income': [
            ['Source', 'Amount'],
            ['Salary', 5000],
            ['Freelance', 1000],
            ['Investments', 500],
            ['Other', 200]
        ],
        'Expenses': [
            ['Category', 'Amount'],
            ['Housing', 1500],
            ['Food', 600],
            ['Transportation', 300],
            ['Utilities', 200],
            ['Entertainment', 150],
            ['Other', 250]
        ],
        'Savings': [
            ['Month', 'Amount'],
            ['Jan', 500],
            ['Feb', 600],
            ['Mar', 550],
            ['Apr', 700],
            ['May', 650]
        ],
        'Investments': [
            ['Type', 'Amount'],
            ['Stocks', 2000],
            ['Bonds', 1000],
            ['Real Estate', 5000],
            ['Crypto', 500]
        ]
    };

    const data = google.visualization.arrayToDataTable(financeData[category]);

    let options, chart;

    switch(category) {
        case 'Income':
        case 'Expenses':
            options = {
                title: category + ' Breakdown',
                pieHole: 0.4,
            };
            chart = new google.visualization.PieChart(document.getElementById('chart-container'));
            break;
        case 'Savings':
            options = {
                title: 'Monthly Savings',
                legend: { position: 'bottom' },
                vAxis: { title: 'Amount ($)' },
                hAxis: { title: 'Month' }
            };
            chart = new google.visualization.ColumnChart(document.getElementById('chart-container'));
            break;
        case 'Investments':
            options = {
                title: 'Investment Portfolio',
                pieHole: 0.4,
            };
            chart = new google.visualization.PieChart(document.getElementById('chart-container'));
            break;
    }

    chart.draw(data, options);

    const table = new google.visualization.Table(document.getElementById('data-table'));
    table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});
}`
            }
        };

        document.getElementById('environment-selector').addEventListener('change', function() {
            const selectedEnvironment = this.value;
            const env = environments[selectedEnvironment];
            
            document.getElementById('html-editor').value = env.html;
            document.getElementById('css-editor').value = env.css;
            document.getElementById('js-editor').value = env.js;
        });

        document.getElementById('run-button').addEventListener('click', function() {
            const html = document.getElementById('html-editor').value;
            const css = document.getElementById('css-editor').value;
            const js = document.getElementById('js-editor').value;

            const output = document.getElementById('output-frame');
            const outputContent = `
                <html>
                    <head>
                        <style>${css}</style>
                        <script src="https://www.gstatic.com/charts/loader.js"><\/script>
                    </head>
                    <body>
                        ${html}
                        <script>${js}<\/script>
                    </body>
                </html>
            `;

            output.srcdoc = outputContent;
        });
    </script>
</body>
</html>
